<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>TileObject.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">gdx-2dgame</a> &gt; <a href="index.source.html" class="el_package">inf112.core.app.TileObjects</a> &gt; <span class="el_source">TileObject.java</span></div><h1>TileObject.java</h1><pre class="source lang-java linenums">package inf112.core.app.TileObjects;

import com.badlogic.gdx.Gdx;
import com.badlogic.gdx.maps.tiled.TiledMap;
import com.badlogic.gdx.maps.tiled.TiledMapTile;
import com.badlogic.gdx.maps.tiled.TiledMapTileLayer;
import com.badlogic.gdx.math.Rectangle;
import com.badlogic.gdx.physics.box2d.Body;
import com.badlogic.gdx.physics.box2d.BodyDef;
import com.badlogic.gdx.physics.box2d.Filter;
import com.badlogic.gdx.physics.box2d.Fixture;
import com.badlogic.gdx.physics.box2d.FixtureDef;
import com.badlogic.gdx.physics.box2d.PolygonShape;
import com.badlogic.gdx.physics.box2d.World;

import inf112.core.app.MainGame;
import inf112.core.app.Characters.IPlayer;
import inf112.core.app.Helper.IAudio;
import inf112.core.app.Model.GameModel;
import inf112.core.app.Model.IGameModel;
import inf112.core.app.View.GameScreens.IHud;

/**
 * The Class TileObject.
 */
public abstract class TileObject implements ITileObject {
    protected World world;
    protected TiledMap map;
    protected TiledMapTile tile;
    protected Rectangle bounds;
    protected Body body;
    protected Fixture fixture;
    protected IAudio audio;
	protected IGameModel model;
<span class="fc" id="L35">	protected int score = 0;</span>
	protected IPlayer player;
	protected IHud hud;
	
    /**
     * Instantiates a new tile object.
     *
     * @param hud the hud
     * @param player the player
     * @param world the box2d world
     * @param map the map
     * @param audio the audio
     * @param bounds the bounds
     */
<span class="fc" id="L49">    public TileObject(IHud hud, IPlayer player, World world, TiledMap map, IAudio audio, Rectangle bounds){</span>
<span class="fc" id="L50">    	this.world = world;</span>
<span class="fc" id="L51">    	this.map = map;</span>
<span class="fc" id="L52">        this.bounds = bounds;</span>
<span class="fc" id="L53">        this.audio = audio;</span>
<span class="fc" id="L54">        this.player = player;</span>
<span class="fc" id="L55">        this.hud = hud;        </span>
<span class="fc" id="L56">        BodyDef bdef = new BodyDef();</span>
        
<span class="fc" id="L58">        FixtureDef fdef = new FixtureDef();</span>
<span class="fc" id="L59">        PolygonShape shape = new PolygonShape();</span>
        
<span class="fc" id="L61">        bdef.type = BodyDef.BodyType.StaticBody;        </span>
<span class="fc" id="L62">        bdef.position.set((bounds.getX()+bounds.getWidth() / 2) / MainGame.PPM, (bounds.getY() + bounds.getHeight() / 2) / MainGame.PPM);</span>
        
<span class="fc" id="L64">        body = world.createBody(bdef);</span>
<span class="fc" id="L65">        shape.setAsBox(bounds.getWidth() / 2 / MainGame.PPM, bounds.getHeight() / 2 / MainGame.PPM);</span>
<span class="fc" id="L66">        fdef.shape = shape;</span>
<span class="fc" id="L67">        fdef.filter.categoryBits = IGameModel.OBJECT_BIT;</span>
<span class="fc" id="L68">        fixture = body.createFixture(fdef);</span>
<span class="fc" id="L69">    }</span>

	@Override
	public void setCollisionCategory(short bit) {
<span class="fc" id="L73">		Filter filter = new Filter();</span>
<span class="fc" id="L74">		filter.categoryBits = bit;</span>
<span class="fc" id="L75">		fixture.setFilterData(filter);		</span>
<span class="fc" id="L76">	}</span>
	
	@Override
	public TiledMapTileLayer.Cell getCell() {
		// Retrieve layer
<span class="fc" id="L81">		TiledMapTileLayer layer = (TiledMapTileLayer) map.getLayers().get(2);</span>
		
		// Retrieve cell x, y positions.
<span class="fc" id="L84">		int xCellPos =  (int) (body.getPosition().x * MainGame.PPM / 32);</span>
<span class="fc" id="L85">		int yCellPos =  (int) (body.getPosition().y * MainGame.PPM / 32);</span>
		
		// Retrieve cell
<span class="fc" id="L88">		TiledMapTileLayer.Cell cell = layer.getCell(xCellPos, yCellPos); </span>
		
		// Log cell x,y position.
		//Gdx.app.log(&quot;Cell identified x-dir. &quot;, String.valueOf((int)(body.getPosition().x * MainGame.PPM / 32)));
		//Gdx.app.log(&quot;Cell identified y-dir. &quot;, String.valueOf((int)(body.getPosition().y * MainGame.PPM / 32)));
		
<span class="fc" id="L94">		return cell;</span>
	}

	@Override
	public int getScore() {
<span class="fc" id="L99">		return score;</span>
	}
	
	@Override
	public abstract void onHairContact();

	@Override
	public abstract void onPlayerContact();
	
	@Override
	public abstract void onFeetContact();

	@Override
	public abstract void onFeetContactEnd();
	
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.11.202310140853</span></div></body></html>