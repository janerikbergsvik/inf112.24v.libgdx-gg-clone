<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>CreditsScreen.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">gdx-2dgame</a> &gt; <a href="index.source.html" class="el_package">inf112.core.app.View.MenuScreens</a> &gt; <span class="el_source">CreditsScreen.java</span></div><h1>CreditsScreen.java</h1><pre class="source lang-java linenums">package inf112.core.app.View.MenuScreens;

import com.badlogic.gdx.Gdx;
import com.badlogic.gdx.Input;
import com.badlogic.gdx.Screen;
import com.badlogic.gdx.graphics.GL20;
import com.badlogic.gdx.graphics.OrthographicCamera;
import com.badlogic.gdx.graphics.g2d.Batch;
import com.badlogic.gdx.maps.tiled.TiledMap;
import com.badlogic.gdx.maps.tiled.TmxMapLoader;
import com.badlogic.gdx.maps.tiled.renderers.OrthogonalTiledMapRenderer;
import com.badlogic.gdx.scenes.scene2d.Stage;
import com.badlogic.gdx.scenes.scene2d.ui.Label;
import com.badlogic.gdx.scenes.scene2d.ui.ScrollPane;
import com.badlogic.gdx.scenes.scene2d.ui.Table;
import com.badlogic.gdx.utils.Align;
import com.badlogic.gdx.utils.viewport.FitViewport;
import com.badlogic.gdx.utils.viewport.Viewport;

import inf112.core.app.Main;
import inf112.core.app.MainGame;
import inf112.core.app.Helper.GameLabelStyler;
import inf112.core.app.Helper.IAudio;
import inf112.core.app.Helper.ILevelManager;
import inf112.core.app.View.GameScreens.IHud;

/**
 * The Class CreditsScreen.
 */
public class CreditsScreen implements Screen {
	// Initialization of variables.
	private MainGame game;
	private Stage stage;
	
	// Tiled level variables
	private OrthogonalTiledMapRenderer tiledmaprenderer;

	// Tiles map
	private TmxMapLoader maploader;
    private TiledMap map;
	
    // Screen variables
    private Viewport viewport;
    private OrthographicCamera cam;
    private Batch batch;
    
	// Level manager, hud and audio
	private ILevelManager levels;
	private IHud hud;
	private IAudio audio;
	
	// Fields related to table
	private Table table;
	
	// Horizontal scrollers
	private ScrollPane scrollPane1;
	private ScrollPane scrollPane2;
	private ScrollPane scrollPane3;
	private ScrollPane scrollPane4;
	private ScrollPane scrollPane5;
	private Label label11;
	private Label label22;
	private Label label33;
	private Label label44;
	private Label label55;
	
	// Timers &amp; Adjusters
<span class="fc" id="L68">	private float scrollSpeed = 150f; // Adjust the scroll speed as needed</span>
<span class="fc" id="L69">	private float scrollTimer = 0f;</span>
<span class="fc" id="L70">	private Integer x_adjuster = 2;</span>
<span class="fc" id="L71">	private Boolean isForward = true;</span>
	
	/**
	 * Instantiates a new credits screen.
	 *
	 * @param game the game
	 * @param batch the batch
	 * @param levels the levels
	 * @param hud the hud
	 * @param audio the audio
	 */
<span class="fc" id="L82">	public CreditsScreen(MainGame game, Batch batch, ILevelManager levels, IHud hud, IAudio audio) {</span>
		// Initialize variables.
<span class="fc" id="L84">		this.game = game;</span>
<span class="fc" id="L85">		this.batch = batch;</span>
<span class="fc" id="L86">		this.levels = levels;</span>
<span class="fc" id="L87">		this.hud = hud;</span>
<span class="fc" id="L88">		this.audio = audio;</span>
		
		// Setup table		
<span class="fc" id="L91">		setupTable();</span>
		
	    // Camera for following the player
	    // Viewport for setting aspect ratio despite screen size
<span class="fc" id="L95">	    cam = new OrthographicCamera();</span>
<span class="fc" id="L96">	    viewport = new FitViewport(Main.WINDOW_WIDTH / MainGame.PPM, Main.WINDOW_HEIGHT / MainGame.PPM, cam);</span>
<span class="fc" id="L97">	    viewport.apply(); </span>
	     
		// Render map	
<span class="fc" id="L100">	    maploader = new TmxMapLoader();</span>
<span class="fc" id="L101">	    map = maploader.load(&quot;levels//tilesets_scaled_32x32/level2.tmx&quot;);	    </span>
<span class="fc" id="L102">	}</span>
	
	@Override
	public void show() {			
<span class="nc" id="L106">			setupStage();</span>
<span class="nc" id="L107">       	}</span>

	/**
	 * Setup stage.
	 */
	private void setupStage() {
		// Render map
<span class="nc" id="L114">		tiledmaprenderer = new OrthogonalTiledMapRenderer(map, 1 / MainGame.PPM);</span>
		
		// Setup stage and viewport		
<span class="nc" id="L117">        viewport = new FitViewport(Main.WINDOW_WIDTH, Main.WINDOW_HEIGHT);</span>
<span class="nc" id="L118">        stage = new Stage(viewport, batch);</span>
        
<span class="nc" id="L120">        stage.addActor(table);</span>

        // Let stage control user input.
<span class="nc" id="L123">       	Gdx.input.setInputProcessor(stage);</span>
<span class="nc" id="L124">	}</span>

	/**
	 * Setup table.
	 */
	private void setupTable() {
		// New table to fill with buttons
<span class="fc" id="L131">    	table = new Table();</span>
        
    	// Adjust table.
<span class="fc" id="L134">    	table.top();</span>
<span class="fc" id="L135">    	table.setFillParent(true);</span>

   	    // Get great Giana Sisters TrueType font.
<span class="fc" id="L138">        Label.LabelStyle labelStyle = GameLabelStyler.getLabelStyle(&quot;truetypefonts/giana/Giana.ttf&quot;, 19, 91, 174, 75);</span>
        
	    // Add labels to the table  
<span class="fc" id="L141">    	Label label1 = new Label(&quot;PRESS ESCAPE TO EXIT&quot;,labelStyle);</span>
<span class="fc" id="L142">    	Label label2 = new Label(&quot; &quot;,labelStyle);</span>
<span class="fc" id="L143">    	Label label3 = new Label(&quot; &quot;,labelStyle);</span>

<span class="fc" id="L145">    	label1.setAlignment(Align.center);</span>
<span class="fc" id="L146">    	label2.setAlignment(Align.center);</span>
<span class="fc" id="L147">    	label3.setAlignment(Align.center);</span>

<span class="fc" id="L149">    	String newString1 = &quot;Digi-teamet Credits                                                         &quot;.repeat(50);</span>
<span class="fc" id="L150">    	label11 = new Label(newString1, labelStyle);</span>
<span class="fc" id="L151">	    label11.setWrap(false); // disable wrapping for horizontal scroll</span>
<span class="fc" id="L152">	    label11.setWidth(10000); // set a width larger than the screen to allow scrolling</span>
<span class="fc" id="L153">	    String newString2 = &quot; Kristoffer Vestbø                                                          &quot;.repeat(50);</span>
<span class="fc" id="L154">    	label22 = new Label(newString2, labelStyle);</span>
<span class="fc" id="L155">	    label22.setWrap(false);</span>
<span class="fc" id="L156">	    label22.setWidth(10000);</span>
<span class="fc" id="L157">		String newString3 = &quot; Jan Erik Bergsvik                                                          &quot;.repeat(50);</span>
<span class="fc" id="L158">    	label33 = new Label(newString3, labelStyle);</span>
<span class="fc" id="L159">	    label33.setWrap(false); </span>
<span class="fc" id="L160">	    label33.setWidth(10000);</span>
<span class="fc" id="L161">		String newString4 = &quot;  Endre Jørgensen                                                           &quot;.repeat(50);</span>
<span class="fc" id="L162">    	label44 = new Label(newString4, labelStyle);</span>
<span class="fc" id="L163">	    label44.setWrap(false); </span>
<span class="fc" id="L164">	    label44.setWidth(10000);</span>
<span class="fc" id="L165">		String newString5 = &quot;  Tanja Todorovic                                                           &quot;.repeat(50);</span>
<span class="fc" id="L166">    	label55 = new Label(newString5, labelStyle);</span>
<span class="fc" id="L167">	    label55.setWrap(false);</span>
<span class="fc" id="L168">	    label55.setWidth(10000); </span>
 		    		
	    // Create scroll pane and add label to it.
<span class="fc" id="L171">	    scrollPane1 = new ScrollPane(label11);</span>
<span class="fc" id="L172">	    scrollPane2 = new ScrollPane(label22);</span>
<span class="fc" id="L173">		scrollPane3 = new ScrollPane(label33);</span>
<span class="fc" id="L174">	    scrollPane4 = new ScrollPane(label44);</span>
<span class="fc" id="L175">		scrollPane5 = new ScrollPane(label55);</span>
		
		// Add to table
<span class="fc" id="L178">		table.add(label1).pad(5).fillX().expandX();</span>
<span class="fc" id="L179">		table.row().pad(5);				</span>
<span class="fc" id="L180">		table.add(scrollPane1).pad(5).fillX().expandX();</span>
<span class="fc" id="L181">		table.row().pad(5);</span>
<span class="fc" id="L182">		table.add(scrollPane2).pad(5).fillX().expandX();</span>
<span class="fc" id="L183">		table.row().pad(5);</span>
<span class="fc" id="L184">		table.add(scrollPane3).pad(5).fillX().expandX();</span>
<span class="fc" id="L185">		table.row().pad(5);</span>
<span class="fc" id="L186">		table.add(scrollPane4).pad(5).fillX().expandX();</span>
<span class="fc" id="L187">		table.row().pad(5);</span>
<span class="fc" id="L188">		table.add(scrollPane5).pad(5).fillX().expandX();</span>
<span class="fc" id="L189">		table.row().pad(5);				</span>
<span class="fc" id="L190">		table.add(label3).pad(5).fillX().expandX();</span>
					    
    	//Add table to stage
<span class="fc" id="L193">        scrollPane1.setScrollX(0);</span>
<span class="fc" id="L194">        scrollPane2.setScrollX(0);</span>
<span class="fc" id="L195">		scrollPane3.setScrollX(0);</span>
<span class="fc" id="L196">        scrollPane4.setScrollX(0);</span>
<span class="fc" id="L197">		scrollPane5.setScrollX(0);</span>
<span class="fc" id="L198">	}</span>
	
	/**
	 * Change scroll position.
	 *
	 * @param label the label
	 * @param scrollTimer the scroll timer
	 * @param scrollSpeed the scroll speed
	 * @param scrollpane the scrollpane
	 */
	private void changeScrollPosition(Label label, float scrollTimer, float scrollSpeed, ScrollPane scrollpane) {
<span class="nc" id="L209">		scrollpane.setScrollX((scrollTimer * scrollSpeed) % (label.getWidth() + Gdx.graphics.getWidth()));  	</span>
<span class="nc" id="L210">	}</span>
	
	@Override
	public void render(float delta) {
     	  // Set camera x position to player coordinates and update
<span class="nc bnc" id="L215" title="All 4 branches missed.">		  if(cam.position.x &gt; 250/2 &amp;&amp; isForward)  {</span>
<span class="nc" id="L216">				x_adjuster = -2;</span>
<span class="nc bnc" id="L217" title="All 2 branches missed.">				isForward = !isForward;</span>
			}
<span class="nc bnc" id="L219" title="All 4 branches missed.">		  if (cam.position.x &lt; 20/2 &amp;&amp; !isForward) {</span>
<span class="nc" id="L220">				x_adjuster = 2;</span>
<span class="nc bnc" id="L221" title="All 2 branches missed.">				isForward = !isForward;</span>
		  }

<span class="nc" id="L224">		  cam.position.x = cam.position.x + x_adjuster / MainGame.PPM;</span>
<span class="nc" id="L225">	 	  cam.update();</span>

	 	  // Clear screen
<span class="nc" id="L228">	 	  Gdx.gl.glClearColor(0, 0, 0, 0);</span>
<span class="nc" id="L229">	 	  Gdx.gl.glClear(GL20.GL_COLOR_BUFFER_BIT);</span>
	      
	 	  // Draw tile map
<span class="nc" id="L232">		  tiledmaprenderer.setView(cam);</span>
<span class="nc" id="L233">		  tiledmaprenderer.render();</span>

		  // Move text scroller horizontally
<span class="nc" id="L236">	      scrollTimer += Gdx.graphics.getDeltaTime();</span>
	      	     	      		      
<span class="nc" id="L238">	      changeScrollPosition(label11, scrollTimer, scrollSpeed, scrollPane1);</span>
<span class="nc" id="L239">	      changeScrollPosition(label22, scrollTimer, scrollSpeed, scrollPane2);</span>
<span class="nc" id="L240">	      changeScrollPosition(label33, scrollTimer, scrollSpeed, scrollPane3);</span>
<span class="nc" id="L241">	      changeScrollPosition(label44, scrollTimer, scrollSpeed, scrollPane4);</span>
<span class="nc" id="L242">	      changeScrollPosition(label55, scrollTimer, scrollSpeed, scrollPane5);</span>
	      	        
	      // Render stage
<span class="nc" id="L245">	  	  batch.setProjectionMatrix(stage.getCamera().combined);</span>
<span class="nc" id="L246">	      stage.act();</span>
<span class="nc" id="L247">	      stage.draw();</span>
	      
	      // Exit if esc pressed
<span class="nc bnc" id="L250" title="All 2 branches missed.">	      if (Gdx.input.isKeyJustPressed(Input.Keys.ESCAPE)) {</span>
<span class="nc" id="L251">				game.setScreen(new MainScreen(game, batch, levels, hud, audio));  		</span>
	  			}       
<span class="nc" id="L253">	}</span>

	@Override
	public void resize(int width, int height) {	
		  // Resize event
<span class="nc" id="L258">	      viewport.update(width,height);</span>
<span class="nc" id="L259">	      cam.position.set(cam.viewportWidth/2,cam.viewportHeight/2,0);</span>
<span class="nc" id="L260">		  cam.update();</span>
		  
<span class="nc" id="L262">	      stage.getViewport().update(width, height, true);</span>
<span class="nc" id="L263">	}</span>

	@Override
	public void pause() {
		// TODO Auto-generated method stub
<span class="fc" id="L268">	}</span>

	@Override
	public void resume() {
		// TODO Auto-generated method stub
<span class="fc" id="L273">	}</span>

	@Override
	public void hide() {
		// TODO Auto-generated method stub
<span class="fc" id="L278">	}</span>

	@Override
	public void dispose() {
		// TODO Auto-generated method stub
<span class="fc" id="L283">	}</span>
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.11.202310140853</span></div></body></html>